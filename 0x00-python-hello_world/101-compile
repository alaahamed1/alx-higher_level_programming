#!/usr/bin/python3
import os
import compileall
import sys

def compile_python_file(file_path):
    compileall.compile_file(file_path, force=True)

if __name__ == "__main__":
    pyfile_path = os.getenv("PYFILE")

    if not pyfile_path:
        print("Error: Environment variable $PYFILE is not set.")
        sys.exit(1)

    if not os.path.isfile(pyfile_path):
        print(f"Error: Python file '{pyfile_path}' not found.")
        sys.exit(1)

    base_name, ext = os.path.splitext(pyfile_path)

    compile_python_file(pyfile_path)

    compiled_file_path = base_name + "c"

    print(f"Compiled Python file: {pyfile_path} -> {compiled_file_path}")
